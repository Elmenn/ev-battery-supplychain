---
phase: 10-cleanup-e2e
plan: 04
type: execute
wave: 2
depends_on: ["10-02"]
files_modified:
  - docs/CONSOLE_AUDIT.md
autonomous: true

must_haves:
  truths:
    - "Production build completes without build errors"
    - "All console errors from application code are identified and fixed"
    - "SDK noise is documented with allowlist rationale"
    - "Both production and development builds are audited"
  artifacts:
    - path: "docs/CONSOLE_AUDIT.md"
      provides: "Console error audit report"
      contains: "allowlist"
  key_links:
    - from: "docs/CONSOLE_AUDIT.md"
      to: "frontend/src/"
      via: "documents console output from app code"
      pattern: "App Error|App Warning"
---

<objective>
Audit frontend console errors in both production and development builds. Fix application-level errors, document SDK/framework noise as acceptable, and produce a console audit report.

Purpose: Ensure the thesis claim of "no console errors" is substantiated. SDK noise from Railgun is expected and documented; application errors are fixed.
Output: docs/CONSOLE_AUDIT.md with categorized findings, and any application-level fixes applied.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-cleanup-e2e/10-CONTEXT.md
@.planning/phases/10-cleanup-e2e/10-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run production build and audit console output</name>
  <files>docs/CONSOLE_AUDIT.md</files>
  <action>
    Perform a console error audit of the frontend application.

    **Step 1: Production build**
    Run `cd frontend && npm run build` and capture all build warnings/errors. Document any build warnings (unused variables, etc.) that appear.

    **Step 2: Analyze build output**
    Review the build output for:
    - Compilation errors (must fix)
    - Compilation warnings (document; fix if trivial like unused imports)
    - Bundle size warnings (document only)

    **Step 3: Source code audit for console.error patterns**
    Since we cannot easily run the browser interactively, do a static audit:
    - Grep for `console.error` in frontend/src/ -- categorize each as intentional error handling vs accidental
    - Grep for `console.warn` in frontend/src/ -- categorize each
    - Check for any `throw` statements in code paths that would surface in console
    - Check for missing error boundaries that could cause unhandled errors

    **Step 4: Fix application-level issues found**
    If the build reveals unused imports (especially from the App.js cleanup in Plan 02), fix them.
    If any console.error calls reference old/dead functionality, remove them.

    **Step 5: Create docs/CONSOLE_AUDIT.md**

    Structure:
    ```markdown
    # Console Error Audit

    ## Build Status
    - Production build: PASS/FAIL
    - Build warnings: [list]
    - Bundle size: [from build output]

    ## Console Output Categories

    ### App Errors (FIXED)
    | Source | Message | Fix Applied |
    |--------|---------|-------------|
    | ... | ... | ... |

    ### App Warnings (REVIEWED)
    | Source | Message | Action |
    |--------|---------|--------|
    | ... | ... | ... |

    ### SDK Noise (ALLOWLISTED)
    | Source | Message Pattern | Rationale |
    |--------|----------------|-----------|
    | Railgun SDK | Initialization logs | Expected during SDK boot |
    | Railgun SDK | POI sync messages | Expected during wallet sync |
    | Railgun SDK | Quick-sync fallback | Expected from empty stubs (Phase 5 decision) |
    | React | Strict mode double-render | Dev mode only, not in production |

    ### Framework Noise (ACCEPTABLE)
    | Source | Message | Rationale |
    |--------|---------|-----------|
    | ... | ... | ... |

    ## Methodology
    - Production build: `npm run build` in frontend/
    - Static analysis: grep for console.error/warn patterns
    - Build date: [date]

    ## Conclusion
    [Summary statement suitable for thesis: "Application produces no console errors from application code. SDK initialization logs from Railgun are documented and expected."]
    ```

    **Known allowlist items (from CONTEXT.md):**
    - Railgun SDK initialization logs
    - POI (Proof of Innocence) sync messages
    - Quick-sync fallback warnings (expected from empty stubs)
    - React dev mode warnings (strict mode double-render)
  </action>
  <verify>
    Run: `cd frontend && npm run build` -- should complete without errors.
    File exists at docs/CONSOLE_AUDIT.md with populated tables.
    No "App Error" items remain unfixed in the report.
  </verify>
  <done>Production build succeeds. Console audit report documents all findings. Application-level errors fixed. SDK noise documented with rationale.</done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run build` completes without errors
2. docs/CONSOLE_AUDIT.md exists with categorized findings
3. All "App Error" category items are marked as FIXED with fix description
4. SDK noise items have clear allowlist rationale
5. Conclusion section provides a thesis-suitable summary statement
</verification>

<success_criteria>
- Production build passes clean
- All application-level console errors identified and fixed
- SDK/framework noise documented with "known and acceptable" rationale
- Audit report suitable for thesis reference
</success_criteria>

<output>
After completion, create `.planning/phases/10-cleanup-e2e/10-04-SUMMARY.md`
</output>
